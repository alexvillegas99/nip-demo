<!-- ğŸ”¹ Filtros de selecciÃ³n -->
<div class="chart-card"></div>

<div class="filtros-horizontales">
  <label for="fechaInicio">ğŸ—“ï¸ Inicio:</label>
  <input id="fechaInicio" type="datetime-local" [(ngModel)]="fechaInicio" />

  <label for="fechaFin">ğŸ—“ï¸ Fin:</label>
  <input id="fechaFin" type="datetime-local" [(ngModel)]="fechaFin" />

  <button class="btn-consultar" (click)="enviarPeticionHistorico()">ğŸ” Consultar</button>
</div>



 


<!-- ğŸ”¸ TabView principal -->
<p-tabView
(onChange)="onTabChange($event.index)"
>
  <p-tabPanel header="VARIDORES DE FRECUENCIA">
    <div class="dashboard-layout">
      <!-- â±ï¸ HorÃ³metro -->
      <div class="widget-card">
        <h3 class="widget-title">
          â±ï¸ Uso total del horÃ³metro 
        </h3>
        <apx-chart
          [series]="horometroPieChart.series"
          [chart]="horometroPieChart.chart"
          [labels]="horometroPieChart.labels"
          [tooltip]="horometroPieChart.tooltip"
          [legend]="horometroPieChart.legend"
          [dataLabels]="horometroPieChart.dataLabels"
        >
        </apx-chart>
      </div>

      <!-- ğŸ”Œ Voltaje promedio -->
      <div class="widget-card">
        <h3 class="widget-title">ğŸ”Œ Voltaje promedio</h3>
        <apx-chart
          [series]="voltajeChart.series"
          [chart]="voltajeChart.chart"
          [xaxis]="voltajeChart.xaxis"
          [yaxis]="voltajeChart.yaxis"
          [plotOptions]="voltajeChart.plotOptions"
          [dataLabels]="voltajeChart.dataLabels"
          [tooltip]="voltajeChart.tooltip"
        >
        </apx-chart>
      </div>

      <!-- âš¡ Corriente promedio -->
      <div class="widget-card">
        <h3 class="widget-title">âš¡ Corriente promedio</h3>
        <apx-chart
          [series]="corrienteChart.series"
          [chart]="corrienteChart.chart"
          [xaxis]="corrienteChart.xaxis"
          [yaxis]="corrienteChart.yaxis"
          [plotOptions]="corrienteChart.plotOptions"
          [dataLabels]="corrienteChart.dataLabels"
          [tooltip]="corrienteChart.tooltip"
        >
        </apx-chart>
      </div>

      <!-- ğŸ’¡ Potencia promedio -->
      <div class="widget-card">
        <h3 class="widget-title">ğŸ’¡ Potencia promedio</h3>
        <apx-chart
          [series]="potenciaChart.series"
          [chart]="potenciaChart.chart"
          [xaxis]="potenciaChart.xaxis"
          [yaxis]="potenciaChart.yaxis"
          [plotOptions]="potenciaChart.plotOptions"
          [dataLabels]="potenciaChart.dataLabels"
          [tooltip]="potenciaChart.tooltip"
        >
        </apx-chart>
      </div>
      <!-- Estado actual de equipos -->
      <!-- Estado actual de equipos -->
      <div class="widget-card">
        <h3 class="widget-title">
          <i class="pi pi-server" style="margin-right: 0.5rem"></i>Estado actual
          de equipos
        </h3>

        <div class="estado-equipos-grid">
          <div
            *ngFor="let equipo of estadoEquiposDetalle"
            class="estado-item"
            [ngClass]="equipo.estado.toLowerCase().replace(' ', '-')"
          >
            <div class="estado-header">
              <div class="estado-circle">
                {{
                  equipo.estado === "EN MARCHA"
                    ? "âœ”"
                    : equipo.estado === "FALLA"
                    ? "âš "
                    : "â¸"
                }}
              </div>
              <div class="estado-nombre">{{ equipo.nombre }}</div>
            </div>
            <div class="estado-text">{{ equipo.estado }}</div>
          </div>
        </div>
      </div>
    </div>
  </p-tabPanel>

  <p-tabPanel header="Medidores de energÃ­a">
    <div class="dashboard-layout">
      <div class="widget-card">
        <h3  class="widget-title">Consumo total de energÃ­a por equipo</h3>
        
        <apx-chart
        *ngIf="consumoEnergiaPieChart"
        [series]="consumoEnergiaPieChart.series"
        [chart]="consumoEnergiaPieChart.chart"
        [labels]="consumoEnergiaPieChart.labels"
        [tooltip]="consumoEnergiaPieChart.tooltip"
        [dataLabels]="consumoEnergiaPieChart.dataLabels"
        [legend]="consumoEnergiaPieChart.legend"
      ></apx-chart>
      <div class="totales mt-3">
        <p><strong>ğŸ”‹ Total energÃ­a:</strong> {{ totalEnergiaKwh }} kWh</p>
        <p><strong>ğŸ’µ Total costo:</strong> ${{ totalCostoEnergia }}</p>
      </div>
      </div>
      <!-- ğŸ”Œ Voltaje total PM -->
      <div class="widget-card">
        <h3 class="widget-title">ğŸ”Œ Voltaje total</h3>
        <apx-chart
          [series]="voltajeChart.series"
          [chart]="voltajeChart.chart"
          [xaxis]="voltajeChart.xaxis"
          [yaxis]="voltajeChart.yaxis"
          [plotOptions]="voltajeChart.plotOptions"
          [dataLabels]="voltajeChart.dataLabels"
          [tooltip]="voltajeChart.tooltip"
        >
        </apx-chart>
      </div>
  
      <!-- âš¡ Corriente total PM -->
      <div class="widget-card">
        <h3 class="widget-title">âš¡ Corriente total</h3>
        <apx-chart
          [series]="corrienteChart.series"
          [chart]="corrienteChart.chart"
          [xaxis]="corrienteChart.xaxis"
          [yaxis]="corrienteChart.yaxis"
          [plotOptions]="corrienteChart.plotOptions"
          [dataLabels]="corrienteChart.dataLabels"
          [tooltip]="corrienteChart.tooltip"
        >
        </apx-chart>
      </div>
  
      <!-- ğŸ’¡ Potencia total PM -->
      <div class="widget-card">
        <h3 class="widget-title">ğŸ’¡ Potencia total</h3>
        <apx-chart
          [series]="potenciaChart.series"
          [chart]="potenciaChart.chart"
          [xaxis]="potenciaChart.xaxis"
          [yaxis]="potenciaChart.yaxis"
          [plotOptions]="potenciaChart.plotOptions"
          [dataLabels]="potenciaChart.dataLabels"
          [tooltip]="potenciaChart.tooltip"
        >
        </apx-chart>
      </div>
  
      <!-- ğŸ”„ Frecuencia total PM -->
      <div class="widget-card">
        <h3 class="widget-title">ğŸ”„ Frecuencia total</h3>
        <apx-chart
          [series]="frecuenciaChart.series"
          [chart]="frecuenciaChart.chart"
          [xaxis]="frecuenciaChart.xaxis"
          [yaxis]="frecuenciaChart.yaxis"
          [plotOptions]="frecuenciaChart.plotOptions"
          [dataLabels]="frecuenciaChart.dataLabels"
          [tooltip]="frecuenciaChart.tooltip"
        >
        </apx-chart>
      </div>
  
      <!-- âš–ï¸ Factor de potencia total PM -->
      <div class="widget-card">
        <h3 class="widget-title">âš–ï¸ Factor de Potencia</h3>
        <apx-chart
          [series]="fpChart.series"
          [chart]="fpChart.chart"
          [xaxis]="fpChart.xaxis"
          [yaxis]="fpChart.yaxis"
          [plotOptions]="fpChart.plotOptions"
          [dataLabels]="fpChart.dataLabels"
          [tooltip]="fpChart.tooltip"
        >
        </apx-chart>
      </div>
    </div>
  </p-tabPanel>
  
  
</p-tabView>
