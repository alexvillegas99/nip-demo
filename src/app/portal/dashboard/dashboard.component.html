<!-- üîπ Filtros de selecci√≥n -->
<div class="chart-card">

  
  
</div>

<div class="filtros-bar">
  <div class="filtro-item">
    <label><strong>Equipo:</strong> {{ tipoSeleccionado | titlecase }}</label>
  </div>
  <div class="filtro-item">
    <label for="tiempoHistorico">Tiempo:</label>
    <select id="tiempoHistorico" [(ngModel)]="tiempoHistorico" (change)="onCambioTiempo(tiempoHistorico)">
      <option value="5m">5m</option>
      <option value="10m">10m</option>
      <option value="1h">1h</option>
      <option value="3h">3h</option>
      <option value="12h">12h</option>
      <option value="1d">1 d√≠a</option>
      <option value="7d">7 d√≠as</option>
      <option value="personalizado">Personalizado</option>
    </select>
  </div>
  <div class="filtro-item" *ngIf="tiempoHistorico === 'personalizado'">
    <label>Valor:</label>
    <input type="number" min="1" [(ngModel)]="cantidadTiempo" />
    <select [(ngModel)]="unidadTiempo" (change)="onCambioTiempoPersonalizado()">
      <option value="s">seg</option>
      <option value="m">min</option>
      <option value="h">hora</option>
      <option value="d">d√≠a</option>
    </select>
  </div>
</div>

<!-- üî∏ TabView principal -->
<p-tabView (onChange)="tipoSeleccionado = $event.index === 0 ? 'variador' : 'pm'">
  <p-tabPanel header="Variadores">
    <div class="dashboard-layout">
      
 

      <!-- ‚è±Ô∏è Hor√≥metro -->
      <div class="widget-card">
        <h3 class="widget-title">‚è±Ô∏è Uso total del hor√≥metro (√∫ltimos 5 d√≠as)</h3>
        <apx-chart
          [series]="horometroPieChart.series"
          [chart]="horometroPieChart.chart"
          [labels]="horometroPieChart.labels"
          [tooltip]="horometroPieChart.tooltip"
          [legend]="horometroPieChart.legend"
          [dataLabels]="horometroPieChart.dataLabels">
        </apx-chart>
      </div>

      <!-- üîå Voltaje promedio -->
      <div class="widget-card">
        <h3 class="widget-title">üîå Voltaje promedio</h3>
        <apx-chart
          [series]="voltajeChart.series"
          [chart]="voltajeChart.chart"
          [xaxis]="voltajeChart.xaxis"
          [yaxis]="voltajeChart.yaxis"
          [plotOptions]="voltajeChart.plotOptions"
          [dataLabels]="voltajeChart.dataLabels"
          [tooltip]="voltajeChart.tooltip">
        </apx-chart>
      </div>

      <!-- ‚ö° Corriente promedio -->
      <div class="widget-card">
        <h3 class="widget-title">‚ö° Corriente promedio</h3>
        <apx-chart
          [series]="corrienteChart.series"
          [chart]="corrienteChart.chart"
          [xaxis]="corrienteChart.xaxis"
          [yaxis]="corrienteChart.yaxis"
          [plotOptions]="corrienteChart.plotOptions"
          [dataLabels]="corrienteChart.dataLabels"
          [tooltip]="corrienteChart.tooltip">
        </apx-chart>
      </div>

      <!-- üí° Potencia promedio -->
      <div class="widget-card">
        <h3 class="widget-title">üí° Potencia promedio</h3>
        <apx-chart
          [series]="potenciaChart.series"
          [chart]="potenciaChart.chart"
          [xaxis]="potenciaChart.xaxis"
          [yaxis]="potenciaChart.yaxis"
          [plotOptions]="potenciaChart.plotOptions"
          [dataLabels]="potenciaChart.dataLabels"
          [tooltip]="potenciaChart.tooltip">
        </apx-chart>
      </div>
     <!-- Estado actual de equipos -->
<!-- Estado actual de equipos -->
<div class="widget-card">
  <h3 class="widget-title">
    <i class="pi pi-server" style="margin-right: 0.5rem"></i>Estado actual de equipos
  </h3>

  <div class="estado-equipos-grid">
    <div *ngFor="let equipo of estadoEquiposDetalle" class="estado-item" [ngClass]="equipo.estado.toLowerCase().replace(' ', '-')">
      <div class="estado-header">
        <div class="estado-circle">{{ equipo.estado === 'EN MARCHA' ? '‚úî' : equipo.estado === 'FALLA' ? '‚ö†' : '‚è∏' }}</div>
        <div class="estado-nombre">{{ equipo.nombre }}</div>
      </div>
      <div class="estado-text">{{ equipo.estado }}</div>
    </div>
  </div>
</div>

      
    </div>
  </p-tabPanel>

  <p-tabPanel header="PM">
    <p class="text-muted p-4">Pr√≥ximamente los gr√°ficos de PM...</p>
  </p-tabPanel>
</p-tabView>
